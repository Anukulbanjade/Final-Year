<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devanagari OCR</title>
</head>
<body>
    <h1>Upload Image for Nepali Text Detection</h1>
    <form id="uploadForm" enctype="multipart/form-data" method="POST" action="/predict">
        <input type="file" name="file" accept="image/*" required>
        <button type="submit">Upload</button>
    </form>

    <div id="response"></div>

    <script>
        document.getElementById("uploadForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            const formData = new FormData(this);
            const responseDiv = document.getElementById("response");

            // Show loading message
            responseDiv.innerHTML = "Processing...";

            try {
                const response = await fetch("/predict", {
                    method: "POST",
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    if (result.detections && result.detections.length > 0) {
                        responseDiv.innerHTML = "<h3>Detected Texts:</h3><ul>";
                        result.detections.forEach(detection => {
                            responseDiv.innerHTML += `<li>Text: ${detection.text} (Confidence: ${detection.confidence}%)</li>`;
                        });
                        responseDiv.innerHTML += "</ul>";
                    } else {
                        responseDiv.innerHTML = "No Nepali characters detected.";
                    }
                } else {
                    responseDiv.innerHTML = `Error: ${result.error}`;
                }
            } catch (error) {
                responseDiv.innerHTML = `An error occurred: ${error.message}`;
            }
        });
    </script>
</body>
</html>
